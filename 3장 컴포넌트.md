## 3장 컴포넌트 

#### 3.1 클래스형 컴포넌트

- 함수형 컴포넌트는 다음과 같은 구조

```react
import React from 'react';
import './App.css';

function App() {
    const name = '리액트';
    return <div className="react">{name}</div>
}

export default App;
```



- 컴포넌트 선언 방식은 두 가지,  하나는 함수형 컴포넌트, 또 다른 하나는 클래스형 컴포넌트

```react
import {React}, { Component } from 'react';

class App extends Component {
    render() {
        const name = 'react';
        return <div className='react'>{name}</div>
    }
}

export default App;
```



- 클래스형 컴포넌트와 함수형 컴포넌트의 차이점은 클래스형 컴포넌트의 경우 이후 배울  state 기능 및 라이프사이클 기능을 사용할 수 있다는 것과

  임의 메서드를 정의할 수 있다는 것이다.



- 클래스형 컴포넌트에서는 render 함수가 꼭 있어야하고, 그 안에서 보여 주어야 할 JSX를 반환해야 한다.



> 언제 함수형 컴포넌트를 사용해야 할까?

> > - 함수형 컴포넌트의 장점
> >
> >   1) 클래스형 컴포넌트보다 선언하기 쉽다.
> >
> >   2) 메모리 자원도 클래스형 컴포넌트보다 덜 사용
> >
> >   3) 프로젝트를 완성하여, 빌드한 후 배포할 때도 함수형 컴포넌트를 사용하는 것이 결과물의 파일 크기가 더 작다.
> >
> > - 함수형 컴포넌트의 단점
> >
> >   1) state와 라이프사이클 API의 사용이 불가능 ( v16.8 업데이트 이후 Hooks 도입하여 해결 )



- 리액트 공식 메뉴얼에서는 컴포넌트를 새로 작성할 때 함수형 컴포넌트와 Hooks 을 사용하도록 권장하나 클래스형 컴포넌트가 사라지는 것이 아니므로 클래스형 컴포넌트의 기능은 꼭 알아 두어야 한다.



***

#### 3.2 첫 컴포넌트 생성



###### 3.2.1 - 3.2.2 src 디렉터리에 MyComponent.js 파일 생성 & 코드 작성



_myComponent.js_

```react
import React from 'react';

const myComponent = () => {
  return <div>나의 새롭고 멋진 컴포넌트</div>  
};

export default MyComponent;
```

> 화살표 함수를 이용하고 있는데, 일반 함수는 자신이 종속된 객체를 this로 가리키지만 화살표 함수는 자신이 종속된 인스턴스를 가리킨다.



> Reactjs Code Snippet 을 사용하여 코드 생성하기
>
> - 에디터에서 'rsc' 입력하면 함수형 컴포넌트를 빠르게 생성 가능
> - 에디터에서 'rcc' 입력하면 클래스형 컴포넌트를 빠르게 생성 가능



***

###### 3.2.3 모듈 내보내기 및 불러오기



###### 3.2.3.1 모듈 내보내기(export)

- 아래 코드를 사용하면서 다른 파일에서 이 파일을 import 가능

```react
export default MyComponent;
```



###### 3.2.3.2 모듈 불러오기(import)

_App.js_

```react
import React from 'react';
import MyComponent from './MyComponent';

const App = () => {
    return <MyComponet />;
};

export default App;
```



***

#### 3.3 props



- props는 properties를 줄인 표현으로, __컴포넌트의 속성을 설정할 때 사용하는 요소__ 이다. props 값은 해당 컴포넌트를 불러와 사용하는 부모 컴포넌트에서 

  설정 가능



###### 3.3.1 JSX 내부에서 props 렌더링

- JSX 내부에서 { } 기호로 감싸 렌더링

```react
import React from 'react';

const MyComponent = props => {
    return <div>안녕하세요, 제 이름은 {props.name}입니다.</div>;
};

export default MyComponent;
```



###### 3.3.2 컴포넌트를 사용할 때 props 값 지정하기

_App.js_

```react
import React from 'react';
import MyComponent from './MyComponent';

const App = () => {
    return <MyComponent name='React' />;
};

export default App;
```



###### 3.3.3 props 기본값 설정: defaultProps

- props 값을 따로 지정하지 않았을 때 보여 줄 기본값을 설정 defaultProps



_MyComponent.js_

```react
import React from 'react';

const MyComponent = props => {
    return <div>안녕하세요, 제 이름은 {props.name}입니다.</div>;
};

MyComponent.defaultProps = {
  name: '기본 이름'  
};

export default MyComponent;
```



###### 3.3.4 태그 사이의 내용을 보여 주는 children

- 리액트 컴포넌트 사용 시, 컴포넌트 태그 사이의 내용을 보여 주는 props 가 있는데 이를 children 이라고 한다.



_App.js_

```react
import React from 'react';
import MyComponent from './MyComponent';

const App = () => {
  return <MyComponent>리액트</MyComponent>  
};

export default App;
```



_MyComponent.js_

```react
import React from 'react';

const MyComponent = props => {
    return (
    	<div>
        	안녕하세요, 제 이름은 {props.name}입니다. <br />
            children 값은 {props.children}
            입니다.
        </div>
    );
};

MyComponent.defaultProps = {
    name: '기본 이름'
};

export default MyComponent;
```



###### 3.3.5 비구조화 할당 문법을 통해 props 내부 값 추출하기



_MyComponent.js_

```react
import React from 'react';

const MyComponent = props => {
    const { name, children } = props;
    return (
    	<div>
        	안녕하세요, 제 이름은 {name}입니다. <br />
            children 값은 {children}
            입니다.
        </div>
    );
};

MyComponent.defaultProps = {
    name: '기본 이름'
};

export default MyComponent;
```

> 객체에서 값을 추출하는 문법을 비구조화 할당(destructuring assignment), 구조 분해 문법이라고 한다.



_MyComponent.js_

```react
import React from 'react';

const MyComponent = ({ name, children }) => {
     return (
    	<div>
        	안녕하세요, 제 이름은 {name}입니다. <br />
            children 값은 {children}
            입니다.
        </div>
    );   
};

MyComponent.defaultProps = {
    name: '기본 이름'
};

export default MyComponent;
```



###### 3.3.6 propTypes를 통한 props 검증

- 컴포넌트의 필수 props를 지정하거나 props의 타입을 지정할 때는 propTypes를 사용, import 구문을 사용하여 불러와야 한다.



_MyComponent.js_

```react
import React from 'react';
import PropTypes from 'prop-types';

const MyComponent = ({ name, children}) => {
    (..)
};

MyComponent.defaultProps = {
    name: '기본 이름'
};

MyComponent.propTypes = {
    name: PropTypes.string
};

export default MyComponent;
```

> 위처럼 설정하면 name 값은 무조건 문자열(string) 형태로 전달해야 된다는 것을 말한다.



_App.js_

```react
import React from 'react';
import MyComponent from './MyComponent';

const App = () => {
  	return <MyComponent name={'React'}>리액트</MyComponent>
	{/* 숫자를 넣을 경우, 오류 */}
};

export default App;
```



###### 3.3.6.1 isRequired를 사용하여 필수 propTypes 설정

- propTypes를 지정하지 않았을 때 경고 메시지를 띄워 주려면 propTypes를 지정할 때 뒤에 isRequired를 붙여주면 된다.



_MyComponent.js_

```react
import React from 'react';
import PropTypes from 'prop-types';

const MyComponent = ({ name, favoriteNumber,children}) => {
    return (
    	<div>
        	안녕하세요, 제 이름은 {name}입니다. <br />
            children 값은 {children}
            입니다.
            <br />
            제가 좋아하는 숫자는 {favoriteNumber}입니다.
        </div>
    );
};

MyComponent.defaultProps = {
    name: '기본 이름'
};

MyComponent.propTypes = {
    name: PropTypes.string,
    favoriteNumber: PropTypes.number.isRequired
};

export default MyComponent;
```



_App.js_

```react
import React from 'react';
import MyComponent from './MyComponent';

const App = () => {
    return (
    	<MyComponent name='React' favoriteNumber={1}>
        	리액트
        </MyComponent>
    );
};

export default App;
```



###### 3.3.6.2 더 많은 PropTypes 종류

```
- array: 배열
- arrayOf(PropType)   ex) arrayOf(PropTypes.number)
- bool
- func
- object
- string
- symbol : ES6의 Symbol
- node : 렌더링할 수 있는 모든 것 (숫자, 문자열, 혹은 JSX 코드, children도 node PropType)
- instanceOf(클래스) : 특정 클래스의 인스턴스
- oneOf(['dog', 'cat']) : 주어진 배열 오소 중 값 하나
- oneOfType([React.PropTypes.string, PropTypes.number]) : 주어진 배열 안의 종류 중 하나
- objectOf(React.PropTypes.number) : 객체의 모든 키 값이 인자로 주어진 PropType인 객체
- shape({ name: PropTypes.string, num: PropTypes.number }) : 주어진 스키마를 가진 객체
- any : 아무 종류
```



###### 3.3.7 클래스형 컴포넌트에서 props 사용하기

- render 함수에서 this.props를 조회하면 된다.



_MyComponent.js_

```react
import React, { Component } from 'react';
import PropTypes from 'prop-types';

class MyComponent extends Component {
    render() {
        const { name, favoriteNumber, children } = this.props; // 비구조화 할당
        return (
        	<div>
             안녕하세요, 제 이름은 {name}입니다. <br />
             children 값은 {children}
             입니다.
             <br />
             제가 좋아하는 숫자는 {favoriteNumber}입니다.
            </div>
        );
    }
}

MyComponent.defaultProps = {
  	name: '기본 이름'  
};

MyComponent.propTypes = {
    name: PropTypes.string,
    favoriteNumber: PropTypes.number.isRequired
};

export default MyComponent;
```



- 클래스형 컴포넌트에서 defaultProps와 propTypes를 설정할 때 class 내부에서 지정하는 방법도 있다.



_MyComponent.js_

```react
import React, { Component } from 'react';
import PropTypes from 'prop-types';

class MyComponent extends Component {
    static defaultProps = {
        name: '기본 이름'
    };
	static propTypes  = {
        name: PropTypes.string,
        favoriteNumber: PropTypes.number.isRequired
    };
	render() {
        const { name, favoriteNumber, children } = this.props; // 비구조화 할당
        return (..);
    }
}
```

